(function (e) {
    // Flot plugin for plotting textual data or categories
    function n(e, t, n, r) {
        var i = t.xaxis.options.mode == "categories",
            s = t.yaxis.options.mode == "categories";
        if (!i && !s) return;
        var o = t;
        o.format = [];
        o.format = [
            // Define the format for x and y axis
            { x: true, number: true, required: true },
            { y: true, number: true, required: true }
        ];
        if (o.bars.show || o.lines.show && o.lines.fill) {
            var a = !! (o.bars.show && o.bars.zero || o.lines.show && o.lines.zero);
            o.format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: a }),
            o.bars.horizontal && (delete o.format[o.format.length - 1].y, o.format[o.format.length - 1].x = true);
        }
        for (var f = 0; f < o.format.length; ++f) {
            o.format[f].x && i && (o.format[f].number = false),
            o.format[f].y && s && (o.format[f].number = false);
        }
    }

    function r(e) {
        var t = -1;
        for (var n in e) e[n] > t && (t = e[n]);
        return t + 1;
    }

    function i(e) {
        var t = [];
        for (var n in e.categories) {
            var r = e.categories[n];
            r >= e.min && r <= e.max && t.push([r, n]);
        }
        return t.sort(function (e, t) {
            return e[0] - t[0];
        }), t;
    }

    function s(t, n, r) {
        if (t[n].options.mode != "categories") return;
        if (!t[n].categories) {
            var u = {},
                a = t[n].options.categories || {};
            if (e.isArray(a)) {
                for (var f = 0; f < a.length; ++f) u[a[f]] = f;
            } else {
                for (var l in a) u[l] = a[l];
            }
            t[n].categories = u;
        }
        t[n].options.ticks || (t[n].options.ticks = i),
        o(r, n, t[n].categories);
    }

    function o(e, t, n) {
        var i = e.points,
            s = e.pointsize,
            o = e.format,
            u = t.charAt(0),
            a = r(n);
        for (var f = 0; f < i.length; f += s) {
            if (i[f] == null) continue;
            for (var l = 0; l < s; ++l) {
                var c = i[f + l];
                if (c == null || !o[l][u]) continue;
                c in n || (n[c] = a, ++a),
                i[f + l] = n[c];
            }
        }
    }

    function u(e, t, n) {
        s(t, "xaxis", n),
        s(t, "yaxis", n);
    }

    function a(e) {
        e.hooks.processRawData.push(n),
        e.hooks.processDatapoints.push(u);
    }

    var t = {
        xaxis: { categories: null },
        yaxis: { categories: null }
    };
    e.plot.plugins.push({
        init: a,
        options: t,
        name: "categories",
        version: "1.0"
    });
})(jQuery);
