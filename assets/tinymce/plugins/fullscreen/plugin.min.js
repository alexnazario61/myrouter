// Adds a "fullscreen" plugin to TinyMCE
tinymce.PluginManager.add("fullscreen", function(editor) {

  // Function to get the dimensions of the viewport
  function getViewPortDimensions() {
    var viewPortWidth, viewPortHeight;
    var n = window,
        doc = document,
        body = doc.body;

    viewPortWidth = body.offsetWidth || n.innerWidth || doc.documentElement.clientWidth;
    viewPortHeight = body.offsetHeight || n.innerHeight || doc.documentElement.clientHeight;

    return { width: viewPortWidth, height: viewPortHeight };
  }

  // Function to get the position of the viewport
  function getViewPortPosition() {
    var viewPortX, viewPortY;
    var viewPort = window.document.documentElement;

    viewPortX = viewPort.scrollLeft;
    viewPortY = viewPort.scrollTop;

    return { x: viewPortX, y: viewPortY };
  }

  // Function to scroll to a specific position
  function scrollToPosition(position) {
    window.scrollTo(position.x, position.y);
  }

  // Function to toggle fullscreen mode
  function toggleFullscreen() {
    var viewPortDimensions = getViewPortDimensions();
    var originalWidth, originalHeight;
    var editorContainer = editor.getContainer();
    var editorContainerStyle = editorContainer.style;
    var editorContentAreaContainer = editor.getContentAreaContainer().firstChild;
    var editorContentAreaContainerStyle = editorContentAreaContainer.style;
    var body = document.body;
    var documentElement = document.documentElement;
    var fullscreenClass = "mce-fullscreen";
    var resizeEventName = "resize";
    var resizeHandler;
    var isFullscreen = false;
    var dom = tinymce.DOM;

    // If fullscreen, set the dimensions of the editor and its container to fill the screen
    if (isFullscreen) {
      dom.bind(window, resizeEventName, resizeHandler);
      originalWidth = editorContentAreaContainerStyle.width;
      originalHeight = editorContentAreaContainerStyle.height;
      editorContainerStyle.width = editorContainerStyle.height = "100%";
      dom.addClass(body, fullscreenClass);
      dom.addClass(documentElement, fullscreenClass);
      dom.addClass(editorContainer, fullscreenClass);
      resizeHandler = function() {
        editorContentAreaContainerStyle.height = viewPortDimensions.height - (editorContainer.clientHeight - editorContentAreaContainer.clientHeight);
      };
      resizeHandler();
      editor.fire("FullscreenState
